<html><head><meta content='text/html; charset=utf-8' http-equiv='Content-Type'></head><body style="background-color:272822">
<!--StartFragment   -->
<p style="font-family: Cascadia Code PL Regular"></font><font color="#f92672">import</font><font color="#d4d4d4">&nbsp;console;<BR>
</font><font color="#f92672">import</font><font color="#d4d4d4">&nbsp;web.json;<BR>
</font><font color="#f92672">import</font><font color="#d4d4d4">&nbsp;string.html<BR>
</font><font color="#f92672">import</font><font color="#d4d4d4">&nbsp;web.rest.client<BR>
<BR>
console.showLoading(</font><font color="#e6db74">"正在获取数据ing..."</font><font color="#d4d4d4">)<BR>
_host&nbsp;=&nbsp;</font><font color="#e6db74">"https://www.todaybing.com"</font><font color="#d4d4d4">;<BR>
_api&nbsp;=&nbsp;</font><font color="#e6db74">"https://www.todaybing.com/web/api"</font><font color="#d4d4d4">;<BR>
<BR>
</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;http&nbsp;=&nbsp;web.rest.client();<BR>
http.referer&nbsp;=&nbsp;_host<BR>
<BR>
</font><font color="#7e8e91">//获取token<BR>
</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;getToken&nbsp;=&nbsp;http.api(_host,&nbsp;</font><font color="#e6db74">"GET"</font><font color="#d4d4d4">,&nbsp;</font><font color="#f92672">function</font><font color="#d4d4d4">(ret)&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;ret&nbsp;=&nbsp;string.match(ret,&nbsp;</font><font color="#e6db74">"s\s=\s(%{})"</font><font color="#d4d4d4">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">return</font><font color="#d4d4d4">&nbsp;web.json.parse(ret)[[</font><font color="#e6db74">"tk"</font><font color="#d4d4d4">]];<BR>
})<BR>
<BR>
</font><font color="#7e8e91">//获取列表<BR>
</font><font color="#d4d4d4">getList&nbsp;=&nbsp;</font><font color="#f92672">function</font><font color="#d4d4d4">(data)&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;list&nbsp;=&nbsp;{}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;doc&nbsp;=&nbsp;string.html(http.post(_api,&nbsp;data))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;content&nbsp;=&nbsp;doc.queryEles([</font><font color="#e6db74">'class'</font><font color="#d4d4d4">]&nbsp;=&nbsp;</font><font color="#e6db74">"media-content"</font><font color="#d4d4d4">)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">for</font><font color="#d4d4d4">&nbsp;(i&nbsp;=&nbsp;1;&nbsp;#&nbsp;content)&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table.push(list,&nbsp;_host&nbsp;+&nbsp;content[ i ].href)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">return</font><font color="#d4d4d4">&nbsp;list;<BR>
}<BR>
<BR>
</font><font color="#7e8e91">//获取详情<BR>
</font><font color="#d4d4d4">getDetail&nbsp;=&nbsp;</font><font color="#f92672">function</font><font color="#d4d4d4">(url)&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">return</font><font color="#d4d4d4">&nbsp;http.api(url,&nbsp;</font><font color="#e6db74">"GET"</font><font color="#d4d4d4">,&nbsp;</font><font color="#f92672">function</font><font color="#d4d4d4">(ret)&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;addr&nbsp;=&nbsp;</font><font color="#e6db74">""</font><font color="#d4d4d4"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;ret&nbsp;=&nbsp;string.html(ret)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;image&nbsp;=&nbsp;ret.queryEle([</font><font color="#e6db74">'class'</font><font color="#d4d4d4">]&nbsp;=&nbsp;</font><font color="#e6db74">"top-main-bg"</font><font color="#d4d4d4">).style<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;address&nbsp;=&nbsp;ret.queryEle([</font><font color="#e6db74">'class'</font><font color="#d4d4d4">]&nbsp;=&nbsp;</font><font color="#e6db74">"text-sm"</font><font color="#d4d4d4">).innerText()<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string.replace(address,&nbsp;</font><font color="#e6db74">":+"</font><font color="#d4d4d4">,&nbsp;</font><font color="#f92672">function</font><font color="#d4d4d4">(s)&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;addr&nbsp;+&nbsp;</font><font color="#e6db74">"&nbsp;"</font><font color="#d4d4d4">&nbsp;+&nbsp;s<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">return</font><font color="#d4d4d4">&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;=&nbsp;url;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addr&nbsp;=&nbsp;string.trim(addr);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;=&nbsp;string.match(image,&nbsp;</font><font color="#e6db74">"\((.+)\)"</font><font color="#d4d4d4">);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title&nbsp;=&nbsp;ret.queryEle(tagName&nbsp;=&nbsp;</font><font color="#e6db74">"h2"</font><font color="#d4d4d4">).innerText();<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;=&nbsp;ret.queryEle(tagName&nbsp;=&nbsp;</font><font color="#e6db74">"time"</font><font color="#d4d4d4">).innerText();<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;=&nbsp;ret.queryEle([</font><font color="#e6db74">'class'</font><font color="#d4d4d4">]&nbsp;=&nbsp;</font><font color="#e6db74">"text-1"</font><font color="#d4d4d4">).outerXml()<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<BR>
&nbsp;&nbsp;&nbsp;&nbsp;})()<BR>
}<BR>
<BR>
</font><font color="#7e8e91">//post&nbsp;parameters<BR>
</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;data&nbsp;=&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;append&nbsp;=&nbsp;</font><font color="#e6db74">"list-home"</font><font color="#d4d4d4">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;paged&nbsp;=&nbsp;1;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;token&nbsp;=&nbsp;getToken();<BR>
&nbsp;&nbsp;&nbsp;&nbsp;action&nbsp;=&nbsp;</font><font color="#e6db74">"ajax_load_posts"</font><font color="#d4d4d4">;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;page&nbsp;=&nbsp;</font><font color="#e6db74">"home"</font><font color="#d4d4d4">;<BR>
}<BR>
</font><font color="#7e8e91">//url&nbsp;list<BR>
</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;list&nbsp;=&nbsp;{}<BR>
</font><font color="#f92672">for</font><font color="#d4d4d4">(i=1;3){<BR>
&nbsp;&nbsp;&nbsp;&nbsp;data.paged&nbsp;=&nbsp;i<BR>
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;t&nbsp;=&nbsp;getList(data)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;table.push(list,&nbsp;table.pop(t,#t)&nbsp;)<BR>
}<BR>
<BR>
</font><font color="#7e8e91">//get&nbsp;all&nbsp;detail<BR>
</font><font color="#f92672">var</font><font color="#d4d4d4">&nbsp;details&nbsp;=&nbsp;{}<BR>
</font><font color="#f92672">for</font><font color="#d4d4d4">&nbsp;(i&nbsp;=&nbsp;1;&nbsp;#list)&nbsp;table.push(details,&nbsp;getDetail(list[ i ]))<BR>
string.save(</font><font color="#e6db74">"/images.json"</font><font color="#d4d4d4">,&nbsp;web.json.stringify(details)&nbsp;)<BR>
console.dumpJson(details)<BR>
console.pause(</font><font color="#f92672">true</font><font color="#d4d4d4">);<BR>
<BR>
</font><font color="#7e8e91">//https://suiang.cn/aardio/code/getImg.html</font></p>
<!--EndFragment-->
</body>
</html>